psuedo code

service report card
count import
1. get arr_serive
2. $num_import
3. if arr_service->arrivals_date == today
    3.1 then $num_import++
4. end if

count yesterday import
1. get arr_service
2. $num_yesterday_import
3. if arr_service->arrivals_date == yesterday
    3.1 then $num_yesterday_import++
4. end if

cal diff import
1. get $num_import, $num_yesterday_import
2. if $num_import >= $num_yesterday_import
    2.1 green color $num_import - $num_yesterday_import
3. if $num_import < $num_yesterday_import
    3.1 red color $num_import - $num_yesterday_import
4. end if


to change ser_stac_id from 'import' to 'ready'
function service_showlist()
1. change_ser_stac_id()
    1.1 update cdms_service set ser_stac_id = 3 where arrivals_date = yesterday AND ser_stac_id BETWEEN 1 AND 2
2. get arr_service
3. display v_service_showlist page

to change ser_stac_id from 'drop' to 'export'
function service_showlist()
1. change_ser_stac_id()
    1.1 update cdms_service set ser_stac_id = 4 where actual_departure_date > now AND ser_stac_id BETWEEN 1 AND 3
2. get arr_service
3. display v_service_showlist page

to hide export service
function service_showlist()
1. get arr_service
2. loop until end of arr_service
3. if (arr_service->ser_stac_id == 4 && actual_departure_date == yesterday)
    3.1 then continue
4. end loop


count export
1. get $today_time
2. $num_export
3. change_ser_stac_id(4)
4. if arr_service->ser_stac_id = 4 and arr_service->ser_status = 1
    4.1 $num_export++

count yesterday export
1. get $yesterday
2. num_yesterday_export
3. if arr_service->ser_actual_departure_date = $yesterday and arr_service->ser_status = 1
    3.1 $num_yesterday_export++
4. end if

cal diff export
1. if $num_export >= $num_yesterday_export
    1.1 green color + $num_export - $num_yesterday_export
2. if $num_export < $num_yesterday_export
    2.1 red colour $num_export - $num_yesterday_export
3. end if

count drop
1. get arr_service
2. $num_drop
3. if arr_service->ser_stac_id NOT IN (1, 4) AND ser_status = 1
    3.1 $num_drop++
4. end if

count yesterday drop
1. get arr_service
2. $num_yesterday_drop
3. $yesterday
4. $yesterday_time
5. if ser_arrivals_date < $yesterday AND ser_actual_departure_date > $yesterday_time AND ser_status = 1
    5.1 $num_yesterday_drop++
6. end if

cal diff drop
1. $num_drop
2. $num_yesterday_drop
3. if num_drop >= num_yesterday_drop
    3.1 then green color + num_drop - num_yesterday_drop
4. if num_drop < num_yesterday_drop
    4.1 then red color num_drop - num_yesterday_drop
5.  end if

count all
1. return count($arr_service)

count yesterday all
1. $yesterday
2. $yesterday_time
3. $num_yesterday_all
4. get arr_service
5. if arrivals_date <= $yesterday AND (actual_departure_date > $yesterday_time OR actual_departure_date is NULL) AND ser_status = 1
    5.1 then $num_yesterday_all++


cal diff all
1. $num_all
2. $num_yesterday_all
3. if num_all > num_yesterday_all
    3.1 green color + num_all - num_yesterday_all
4. if num_all < num_yesterday_all
    4.1 red color num_all - num_yesterday_all


get arr_service by set date range
1. import at start date
2. export at end date
3. drop
    3.1 import before start date
    3.2 export after end date
4. what about service that
    4.1 import after start date
    4.2 export before end date
5. what about ser_stac_id

1. $start_date
2. $end_date
3. get arr_service
4. if (ser_arrivals_date == $start_date OR actual_departure_date == $end_date OR (ser_arrivals_date < $start_date AND (ser_actual_departure_date > $end_date OR ser_actual_departure_date IS NULL)) OR (ser_arrivals_date > $start_date AND ser_actual_departure_date < $end_date)) AND ser_status = 1

date range
count import

 